<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Coordenador de Curso</title>

    <link rel="stylesheet" href="../../assets/css/common/layout.css">
    <link rel="stylesheet" href="../../assets/css/global/tables.css">
    <link rel="stylesheet" href="../../assets/css/global/cards.css"> 
    <link rel="stylesheet" href="../../assets/css/global/badges.css">
    <link rel="stylesheet" href="../../assets/css/global/button.css">
    <link rel="stylesheet" href="../../assets/css/global/forms.css">
    <link rel="stylesheet" href="../../assets/css/global/modal.css">
    <link rel="stylesheet" href="../../assets/css/global/alerts.css">
</head>

<body>

    <div id="layout-area"></div>
    
    <div id="toast-container"></div>

    <script type="module">
        import { carregarLayout } from "../../assets/js/common/layout.js";
        
        // Importa Módulo Oportunidades
        import { carregarViewOportunidades } from "../../assets/js/coordenador/oportunidades.js";
        
        // Importa Módulo Validação (NOVO)
        import { carregarViewValidacao } from "../../assets/js/coordenador/validacao.js";

        import { carregarViewDiscentes } from "../../assets/js/coordenador/discentes.js";

        import { carregarViewRelatorios, initRelatorios } from "../../assets/js/coordenador/relatorios.js";

        import { carregarViewComunicados, initComunicados } from "../../assets/js/coordenador/comunicados.js";

        import { carregarViewVisaoGeral, initVisaoGeral } from "../../assets/js/coordenador/dashboard_home.js";

        async function init() {
            
            // Carrega as views (HTMLs)
            const htmlOportunidades = await carregarViewOportunidades();
            const htmlValidacao = await carregarViewValidacao();
            const htmlDiscentes = await carregarViewDiscentes();
            const htmlRelatorios = await carregarViewRelatorios();
            const htmlComunicados = await carregarViewComunicados();
            const htmlVisaoGeral = await carregarViewVisaoGeral();

            // Monta o menu
           carregarLayout([
                 { 
                    label: "Visão Geral", 
                    content: htmlVisaoGeral,
                    title: "Dashboard e KPIs",
                    description: "Visão sistêmica e indicadores de desempenho.",
                    onRender: () => initVisaoGeral()
                },
                { 
                    label: "Oportunidades", 
                    content: htmlOportunidades,
                    // Novos campos para o Header:
                    title: "Gestão de Oportunidades",
                    description: "Criar, editar e validar atividades de extensão do curso."
                },
                { 
                    label: "Validação", 
                    content: htmlValidacao,
                    title: "Validação de Propostas",
                    description: " Analise, aprove ou rejeite propostas de extensão submetidas por docentes do curso."
                },
                { 
                    label: "Relatórios", 
                    content: htmlRelatorios,
                    title: "Relatórios Gerenciais",
                    description: "Exportação de dados para UCE e PROEC.",
                    onRender: () => {
                        initRelatorios();
                    }
                },
                { 
                    label: "Discentes", 
                    content: htmlDiscentes ,
                    title: "Gestão Acadêmica",
                    description: "Acompanhamento de alunos e histórico de extensão."
                    
                },

                { 
                    label: "Comunicado", 
                    content: htmlComunicados,
                    title: "Comunicados Oficiais",
                    description: "Envie notificações oficias em massa para discentes ou docentes.",
                    onRender: () => initComunicados()
                }

            ]);
            
            // Força a aba "Oportunidades" a abrir primeiro (padrão)
            // Se quiser testar validação direto, troque a ordem no array acima.
        }

        init();
    </script>
</body>
</html>