<div class="kpi-grid" style="margin-bottom: 25px;">
    
    <div class="kpi-card">
        <div class="kpi-title">Discentes Em Risco</div>
        <div class="kpi-value" id="kpi-risco">0</div>
        <div class="kpi-sub kpi-negative">Abaixo da carga m√≠nima (PPC)</div>
    </div>

    <div class="kpi-card">
        <div class="kpi-title">Fila de Solicita√ß√µes</div>
        <div class="kpi-value" id="kpi-solicitacoes">0</div>
        <div class="kpi-sub kpi-warning">Pendentes de an√°lise</div>
    </div>

    <div class="kpi-card">
        <div class="kpi-title">Total de Discentes</div>
        <div class="kpi-value" id="kpi-total-alunos">0</div>
        <div class="kpi-sub">Matriculados no curso</div>
    </div>
</div>

<div style="margin-bottom: 20px; border-bottom: 2px solid #e3d8c7; padding-bottom: 10px;">
    <button class="btn btn-secondary active-tab-btn" id="btnTabLista" onclick="alternarAbaDiscente('lista')">
        Base de Discentes
    </button>
    <button class="btn btn-ghost" id="btnTabSolicitacoes" onclick="alternarAbaDiscente('solicitacoes')">
        Solicita√ß√µes de Horas (Fila)
    </button>
</div>

<div id="view-lista-discentes">
    
    <div class="toolbar" style="display: flex; gap: 15px; margin-bottom: 20px;">
        <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" id="buscaDiscente" onkeyup="filtrarDiscentes()" placeholder="Nome ou Matr√≠cula...">
        </div>
        <select class="select" id="filtroSituacao" onchange="filtrarDiscentes()">
            <option value="todos">Todas as Situa√ß√µes</option>
            <option value="regular">Regular</option>
            <option value="risco">Em Risco</option>
            <option value="concluido">Conclu√≠do</option>
        </select>
    </div>

    <div class="table-container">
        <table class="global-table">
            <thead>
                <tr>
                    <th>Matr√≠cula</th>
                    <th>Nome</th>
                    <th>PPC</th> <th>Progresso (%)</th>
                    <th>Horas Conclu√≠das</th>
                    <th>Situa√ß√£o</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody id="tb-discentes">
                <tr><td colspan="7" align="center">Carregando...</td></tr>
            </tbody>
        </table>
    </div>
</div>

<div id="view-solicitacoes" style="display: none;">
    
    <div class="alert alert-info" id="alerta-prazos">
        <strong>Aten√ß√£o:</strong> Solicita√ß√µes n√£o analisadas em at√© 10 dias entram em status cr√≠tico (Atrasada).
    </div>

    <div class="table-container">
        <div class="table-title">Fila de Valida√ß√£o de Horas Externas</div>
        <table class="global-table">
            <thead>
                <tr>
                    <th>Data Envio</th>
                    <th>Discente</th>
                    <th>Atividade Externa</th>
                    <th>C.H. Solic.</th>
                    <th>Status</th> <th>Anexo</th>
                    <th>A√ß√£o</th>
                </tr>
            </thead>
            <tbody id="tb-solicitacoes">
                <tr><td colspan="7" align="center">Nenhuma solicita√ß√£o pendente.</td></tr>
            </tbody>
        </table>
    </div>
</div>

<div id="modalPerfilAluno" class="modal-overlay">
    <div class="modal" style="width: 800px; max-width: 95%;">
        <div class="modal-header">
            <h2>Dossi√™ do Discente</h2>
            <span class="modal-close" onclick="fecharModalD('modalPerfilAluno')">&times;</span>
        </div>
        <div class="modal-body" id="corpoPerfilAluno" style="max-height: 70vh; overflow-y: auto;">
            </div>
        <div class="modal-footer">
            <button class="btn btn-primary" onclick="fecharModalD('modalPerfilAluno')">Fechar</button>
        </div>
    </div>
</div>

<div id="modalAnaliseSolic" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h2>Analisar Solicita√ß√£o</h2>
            <span class="modal-close" onclick="fecharModalD('modalAnaliseSolic')">&times;</span>
        </div>
        <div class="modal-body">
            <div class="alert alert-warning">
                Verifique a carga hor√°ria e a autenticidade do documento anexo.
            </div>
            <p id="descSolicitacao" style="margin-bottom: 10px; font-weight: bold; font-size: 16px; color: #5d0b0b;"></p>
            
            <div style="background: #f4f4f4; padding: 12px; border-radius: 8px; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 20px;">üìÑ</span>
                <a href="#" target="_blank" style="color: #7a1010; font-weight: bold; text-decoration: underline;">Visualizar Certificado/Documento (PDF)</a>
            </div>

            <div class="form-group">
                <label class="form-label">Parecer da Coordena√ß√£o:</label>
                <textarea id="txtParecer" class="textarea" placeholder="Descreva o motivo em caso de indeferimento..."></textarea>
                <small style="color: #666;">* Obrigat√≥rio para rejei√ß√£o.</small>
            </div>
            <input type="hidden" id="idSolicTemp">
        </div>
        <div class="modal-footer">
            <button class="btn btn-danger" onclick="confirmarAnalise('indeferir')">Indeferir</button>
            <button class="btn btn-success" onclick="confirmarAnalise('deferir')">Deferir</button>
        </div>
    </div>
</div>