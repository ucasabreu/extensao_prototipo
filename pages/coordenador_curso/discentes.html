<div class="kpi-grid" style="margin-bottom: 25px;">
    
    <div class="kpi-card">
        <div class="kpi-title">Discentes Em Risco</div>
        <div class="kpi-value" id="kpi-risco">0</div>
        <div class="kpi-sub kpi-negative">Abaixo da carga m√≠nima</div>
    </div>

    <div class="kpi-card">
        <div class="kpi-title">Solicita√ß√µes Pendentes</div>
        <div class="kpi-value" id="kpi-solicitacoes">0</div>
        <div class="kpi-sub kpi-warning">Aguardando an√°lise</div>
    </div>

    <div class="kpi-card">
        <div class="kpi-title">Total de Discentes</div>
        <div class="kpi-value" id="kpi-total-alunos">0</div>
        <div class="kpi-sub">Vinculados ao curso</div>
    </div>
</div>

<div style="margin-bottom: 20px; border-bottom: 2px solid #e3d8c7; padding-bottom: 10px;">
    <button class="btn btn-secondary active-tab-btn" id="btnTabLista" onclick="alternarAbaDiscente('lista')">
        üìã Base de Discentes
    </button>
    <button class="btn btn-ghost" id="btnTabSolicitacoes" onclick="alternarAbaDiscente('solicitacoes')">
        üì© Solicita√ß√µes de Horas (Fila)
    </button>
</div>

<div id="view-lista-discentes">
    
    <div class="toolbar" style="display: flex; gap: 15px; margin-bottom: 20px;">
        <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" id="buscaDiscente" onkeyup="filtrarDiscentes()" placeholder="Nome ou Matr√≠cula...">
        </div>
        <select class="select" id="filtroSituacao" onchange="filtrarDiscentes()">
            <option value="todos">Todas as Situa√ß√µes</option>
            <option value="regular">Regular</option>
            <option value="risco">Em Risco</option>
            <option value="concluido">Conclu√≠do</option>
        </select>
    </div>

    <div class="table-container">
        <table class="global-table">
            <thead>
                <tr>
                    <th>Matr√≠cula</th>
                    <th>Nome</th>
                    <th>Progresso (%)</th>
                    <th>Horas Conclu√≠das</th>
                    <th>Situa√ß√£o</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody id="tb-discentes">
                <tr><td colspan="6" align="center">Carregando...</td></tr>
            </tbody>
        </table>
    </div>
</div>

<div id="view-solicitacoes" style="display: none;">
    
    <div class="alert alert-info">
        Aten√ß√£o: Solicita√ß√µes com mais de 10 dias s√£o marcadas como "Atrasadas".
    </div>

    <div class="table-container">
        <table class="global-table">
            <thead>
                <tr>
                    <th>Data Envio</th>
                    <th>Discente</th>
                    <th>Atividade Externa</th>
                    <th>C.H.</th>
                    <th>Anexo</th>
                    <th>Status</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody id="tb-solicitacoes">
                <tr><td colspan="7" align="center">Nenhuma solicita√ß√£o pendente.</td></tr>
            </tbody>
        </table>
    </div>
</div>

<div id="modalPerfilAluno" class="modal-overlay">
    <div class="modal" style="width: 700px;">
        <div class="modal-header">
            <h2>Perfil do Discente</h2>
            <span class="modal-close" onclick="fecharModalD('modalPerfilAluno')">&times;</span>
        </div>
        <div class="modal-body" id="corpoPerfilAluno">
            </div>
        <div class="modal-footer">
            <button class="btn btn-primary" onclick="fecharModalD('modalPerfilAluno')">Fechar</button>
        </div>
    </div>
</div>

<div id="modalAnaliseSolic" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h2>Analisar Solicita√ß√£o</h2>
            <span class="modal-close" onclick="fecharModalD('modalAnaliseSolic')">&times;</span>
        </div>
        <div class="modal-body">
            <p id="descSolicitacao" style="margin-bottom: 15px; font-weight: bold;"></p>
            
            <div style="background: #f4f4f4; padding: 10px; border-radius: 8px; margin-bottom: 15px;">
                <a href="#" target="_blank" style="color: #7a1010; font-weight: bold;">üìé Ver Documento Anexo (PDF)</a>
            </div>

            <div class="form-group">
                <label class="form-label">Parecer (Obrigat√≥rio para Indeferimento):</label>
                <textarea id="txtParecer" class="textarea" placeholder="Justifique sua decis√£o..."></textarea>
            </div>
            <input type="hidden" id="idSolicTemp">
        </div>
        <div class="modal-footer">
            <button class="btn btn-danger" onclick="confirmarAnalise('indeferir')">Indeferir</button>
            <button class="btn btn-success" onclick="confirmarAnalise('deferir')">Deferir</button>
        </div>
    </div>
</div>